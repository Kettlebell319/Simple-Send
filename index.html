<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>Simple Send - Newsletter Tool</title>
    <link href="./dist/styles.css" rel="stylesheet">
    <!-- Add iOS meta tags for better mobile experience -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body class="bg-ios-light-gray font-sf-pro min-h-screen">
    <!-- Status Bar Spacer -->
    <div class="h-12 bg-white"></div>

    <!-- Views Container -->
    <div id="views">
        <!-- Home View -->
        <div id="home-view" class="view active">
            <div class="max-w-md mx-auto px-4 py-6">
                <!-- Header -->
                <header class="mb-8 text-center">
                    <h1 class="text-3xl font-bold text-gray-900">Simple Send</h1>
                    <p class="text-ios-gray mt-1">Your Newsletter Tool</p>
                </header>

                <!-- Main Navigation Buttons -->
                <nav class="space-y-4">
                    <!-- Send It Button -->
                    <a href="#" 
                    onclick="navigateTo('compose'); return false;"
                    class="block bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow active:scale-98 transform">
                        <div class="flex items-center space-x-4">
                            <span class="text-4xl">‚úâÔ∏è</span>
                            <div class="flex-1">
                                <h2 class="text-xl font-semibold text-gray-900">Send It</h2>
                                <p class="text-ios-gray text-sm">Compose & schedule newsletters</p>
                            </div>
                            <span class="text-ios-gray">‚Üí</span>
                        </div>
                    </a>

                    <!-- Subscribers Button -->
                    <a href="#" 
                    onclick="navigateTo('subscribers'); return false;"
                    class="block bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow active:scale-98 transform">
                        <div class="flex items-center space-x-4">
                            <span class="text-4xl">üë•</span>
                            <div class="flex-1">
                                <h2 class="text-xl font-semibold text-gray-900">Subs</h2>
                                <p class="text-ios-gray text-sm">Manage your subscriber list</p>
                            </div>
                            <span class="text-ios-gray">‚Üí</span>
                        </div>
                    </a>

                    <!-- Share Button -->
                    <a href="#" 
                    onclick="navigateTo('share'); return false;"
                    class="block bg-white rounded-2xl p-6 shadow-sm hover:shadow-md transition-shadow active:scale-98 transform">
                        <div class="flex items-center space-x-4">
                            <span class="text-4xl">üîó</span>
                            <div class="flex-1">
                                <h2 class="text-xl font-semibold text-gray-900">Share</h2>
                                <p class="text-ios-gray text-sm">Get your subscription link</p>
                            </div>
                            <span class="text-ios-gray">‚Üí</span>
                        </div>
                    </a>
                </nav>
            </div>
        </div>

        <!-- Compose View -->
        <div id="compose-view" class="view hidden">
            <div class="max-w-md mx-auto px-4 py-6">
                <!-- Header with Back Button -->
                <header class="mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <button onclick="navigateTo('home')" class="text-ios-blue flex items-center">
                            <span class="mr-1">‚Üê</span> Back
                        </button>
                        <button onclick="saveAsDraft()" class="text-ios-blue text-sm">
                            Save Draft
                        </button>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-900">New Newsletter</h1>
                </header>
                
                <!-- Compose Form -->
                <form class="space-y-6" onsubmit="handleSubmit(event)">
                    <!-- Subject Field -->
                    <div class="bg-white rounded-2xl p-4 shadow-sm">
                        <label class="block text-sm font-medium text-ios-gray mb-2">Subject</label>
                        <input 
                            type="text" 
                            class="w-full px-0 py-2 bg-transparent border-0 border-b border-gray-200 focus:border-ios-blue focus:ring-0 outline-none text-base"
                            placeholder="What's this newsletter about?"
                            required
                        >
                    </div>
                    
                    <!-- Content Field -->
                    <div class="bg-white rounded-2xl p-4 shadow-sm">
                        <label class="block text-sm font-medium text-ios-gray mb-2">Content</label>
                        <textarea 
                            class="w-full px-0 py-2 bg-transparent border-0 focus:ring-0 outline-none min-h-[200px] text-base resize-none"
                            placeholder="Write your newsletter content here..."
                            required
                        ></textarea>
                    </div>

                    <!-- Schedule Section -->
                    <div class="bg-white rounded-2xl p-4 shadow-sm">
                        <div class="flex items-center justify-between mb-4">
                            <label class="text-sm font-medium text-ios-gray">Send at</label>
                            <button 
                                type="button"
                                class="text-ios-blue text-sm"
                                onclick="showScheduleView()"
                            >
                                Change
                            </button>
                        </div>
                        <div id="schedulePreview" class="text-base text-gray-900">
                            Send immediately
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="space-y-3">
                        <button 
                            type="submit"
                            class="w-full bg-ios-blue text-white py-3.5 px-6 rounded-2xl font-medium hover:bg-blue-600 transition-colors flex items-center justify-center"
                        >
                            Send Newsletter
                        </button>
                        <button 
                            type="button"
                            onclick="navigateTo('home')"
                            class="w-full bg-gray-100 text-gray-700 py-3.5 px-6 rounded-2xl font-medium hover:bg-gray-200 transition-colors"
                        >
                            Cancel
                        </button>
                    </div>
                </form>
            </div>

            <!-- Schedule Modal -->
            <div id="scheduleModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
                <div class="bg-white rounded-t-2xl absolute bottom-0 left-0 right-0 p-6 transform transition-transform duration-300">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-semibold">Schedule Send</h3>
                        <button onclick="closeScheduleModal()" class="text-ios-gray">
                            ‚úï
                        </button>
                    </div>
                    
                    <div class="space-y-4 mb-6">
                        <div class="flex items-center space-x-4">
                            <input type="radio" id="sendNow" name="schedule" value="now" checked class="text-ios-blue">
                            <label for="sendNow" class="flex-1">Send immediately</label>
                        </div>
                        <div class="flex items-center space-x-4">
                            <input type="radio" id="sendLater" name="schedule" value="later" class="text-ios-blue">
                            <label for="sendLater" class="flex-1">Schedule for later</label>
                        </div>
                        <div id="dateTimeSelector" class="hidden mt-4">
                            <input 
                                type="datetime-local" 
                                class="w-full px-4 py-2 rounded-xl border border-gray-200 focus:border-ios-blue focus:ring-1 focus:ring-ios-blue outline-none"
                            >
                        </div>
                    </div>

                    <button 
                        onclick="saveSchedule()"
                        class="w-full bg-ios-blue text-white py-3.5 px-6 rounded-2xl font-medium hover:bg-blue-600 transition-colors"
                    >
                        Done
                    </button>
                </div>
            </div>
        </div>

        <!-- Subscribers View -->
        <div id="subscribers-view" class="view hidden">
            <div class="max-w-md mx-auto px-4 py-6">
                <!-- Header -->
                <header class="mb-8">
                    <div class="flex items-center space-x-2">
                        <button onclick="navigateTo('home')" class="text-ios-blue">
                            <span class="text-xl">‚Üê</span>
                        </button>
                        <h1 class="text-4xl font-bold">Subscribers</h1>
                    </div>
                </header>

                <!-- Subscribers Card -->
                <div class="bg-white rounded-3xl p-6 shadow-sm">
                    <div class="flex items-center justify-between mb-8">
                        <h2 class="text-2xl font-bold">Your Subscribers</h2>
                        <button onclick="navigateTo('add-subscriber')" class="text-ios-blue text-lg font-medium">
                            Add New
                        </button>
                    </div>

                    <!-- Subscribers List -->
                    <div class="space-y-6" id="subscribersList">
                        <!-- James -->
                        <div class="subscriber-item">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-xl mb-1">james@example.com</h3>
                                    <p class="text-gray-500">Subscribed 2 days ago</p>
                                </div>
                                <button class="text-red-500 text-lg font-medium remove-btn">
                                    Remove
                                </button>
                            </div>
                        </div>

                        <!-- Amanda -->
                        <div class="subscriber-item">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-xl mb-1">amanda@example.com</h3>
                                    <p class="text-gray-500">Subscribed 3 days ago</p>
                                </div>
                                <button class="text-red-500 text-lg font-medium remove-btn">
                                    Remove
                                </button>
                            </div>
                        </div>

                        <!-- David -->
                        <div class="subscriber-item">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h3 class="text-xl mb-1">david@example.com</h3>
                                    <p class="text-gray-500">Subscribed 5 days ago</p>
                                </div>
                                <button class="text-red-500 text-lg font-medium remove-btn">
                                    Remove
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Share View -->
        <div id="share-view" class="view hidden">
            <div class="max-w-md mx-auto px-4 py-6">
                <header class="mb-8">
                    <button onclick="navigateTo('home')" class="text-ios-blue mb-4 flex items-center">
                        <span class="mr-1">‚Üê</span> Back
                    </button>
                    <h1 class="text-2xl font-bold text-gray-900">Share</h1>
                </header>
                
                <div class="bg-white rounded-2xl p-6 shadow-sm">
                    <h2 class="text-lg font-semibold mb-4">Your Subscription Link</h2>
                    <div class="flex items-center space-x-2 mb-6">
                        <input type="text" readonly value="https://simple-send.com/subscribe/your-unique-id" class="flex-1 px-4 py-3 rounded-xl bg-ios-light-gray text-sm">
                        <button class="bg-ios-blue text-white px-4 py-3 rounded-xl">Copy</button>
                    </div>
                    
                    <div class="space-y-4">
                        <button class="w-full flex items-center justify-center space-x-2 bg-[#25D366] text-white py-3 rounded-xl">
                            <span>Share on WhatsApp</span>
                        </button>
                        <button class="w-full flex items-center justify-center space-x-2 bg-[#1DA1F2] text-white py-3 rounded-xl">
                            <span>Share on Twitter</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schedule View -->
        <div id="schedule-view" class="view hidden">
            <div class="max-w-md mx-auto px-4 py-6">
                <header class="mb-8">
                    <button onclick="navigateTo('compose')" class="text-ios-blue mb-4 flex items-center">
                        <span class="mr-1">‚Üê</span> Back
                    </button>
                    <h1 class="text-3xl font-bold text-gray-900">Schedule</h1>
                    <p class="text-xl text-gray-600 mt-2">Set a date and time to send your newsletter.</p>
                </header>

                <div class="bg-white rounded-2xl p-6 shadow-sm mb-4">
                    <h2 class="text-lg font-medium mb-4">Send on</h2>
                    <div class="flex space-x-3">
                        <button 
                            id="dateButton" 
                            class="flex-1 bg-ios-light-gray px-4 py-2 rounded-xl text-left"
                            onclick="showDatePicker()"
                        >
                            Apr 30, 2024
                        </button>
                        <button 
                            id="timeButton"
                            class="flex-1 bg-ios-light-gray px-4 py-2 rounded-xl text-left"
                            onclick="showTimePicker()"
                        >
                            10:00 AM
                        </button>
                    </div>
                </div>

                <button 
                    onclick="saveScheduleAndReturn()"
                    class="w-full bg-white text-center py-3 rounded-2xl shadow-sm text-lg font-medium"
                >
                    Schedule
                </button>
            </div>

            <!-- Date Picker Sheet -->
            <div id="datePickerSheet" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
                <div class="bg-white rounded-t-2xl absolute bottom-0 left-0 right-0 p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold">Select Date</h3>
                        <button onclick="closeDatePicker()" class="text-ios-blue">Done</button>
                    </div>
                    <input 
                        type="date" 
                        id="datePicker"
                        class="w-full text-center text-xl py-3"
                        onchange="updateSelectedDate(this.value)"
                    >
                </div>
            </div>

            <!-- Time Picker Sheet -->
            <div id="timePickerSheet" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50">
                <div class="bg-white rounded-t-2xl absolute bottom-0 left-0 right-0 p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold">Select Time</h3>
                        <button onclick="closeTimePicker()" class="text-ios-blue">Done</button>
                    </div>
                    <input 
                        type="time" 
                        id="timePicker"
                        class="w-full text-center text-xl py-3"
                        onchange="updateSelectedTime(this.value)"
                    >
                </div>
            </div>
        </div>

        <!-- Add Subscriber View -->
        <div id="add-subscriber-view" class="view hidden">
            <div class="max-w-md mx-auto px-4 py-6">
                <!-- Header -->
                <header class="mb-8">
                    <div class="flex items-center space-x-2">
                        <button onclick="navigateTo('subscribers')" class="text-ios-blue">
                            <span class="text-xl">‚Üê</span>
                        </button>
                        <h1 class="text-4xl font-bold">Add Subscriber</h1>
                    </div>
                </header>

                <!-- Add Form -->
                <div class="bg-white rounded-3xl p-6 shadow-sm">
                    <form id="addSubscriberForm" class="space-y-6" onsubmit="handleAddSubscriber(event)">
                        <div>
                            <label class="block text-gray-500 mb-2">Email</label>
                            <input 
                                type="email" 
                                class="w-full bg-gray-50 rounded-xl px-4 py-3 text-lg border-0 focus:ring-2 focus:ring-ios-blue"
                                placeholder="Enter email address"
                                required
                            >
                        </div>
                        <button 
                            type="submit" 
                            class="w-full bg-ios-blue text-white rounded-xl py-3 text-lg font-medium"
                        >
                            Add Subscriber
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <style>
        .view {
            display: none;
        }
        .view.active {
            display: block;
        }
        .subscriber-item {
            position: relative;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid #f0f0f0;
        }
        .subscriber-item:last-child {
            padding-bottom: 0;
            border-bottom: none;
        }
    </style>

    <script>
        function navigateTo(section) {
            // Hide all views
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
                view.classList.add('hidden');
            });
            
            // Show selected view
            const targetView = document.getElementById(`${section}-view`);
            if (targetView) {
                targetView.classList.remove('hidden');
                targetView.classList.add('active');
            }
        }

        function toggleSchedule() {
            document.getElementById('scheduleModal').classList.remove('hidden');
        }

        function closeScheduleModal() {
            document.getElementById('scheduleModal').classList.add('hidden');
        }

        function saveSchedule() {
            const sendLater = document.getElementById('sendLater').checked;
            const dateTime = document.querySelector('input[type="datetime-local"]').value;
            const preview = document.getElementById('schedulePreview');
            
            if (sendLater && dateTime) {
                const date = new Date(dateTime);
                preview.textContent = date.toLocaleString();
            } else {
                preview.textContent = 'Send immediately';
            }
            
            closeScheduleModal();
        }

        function saveAsDraft() {
            // Add draft saving logic here
            alert('Draft saved!');
        }

        function handleSubmit(event) {
            event.preventDefault();
            // Add submission logic here
            alert('Newsletter scheduled!');
            navigateTo('home');
        }

        // Show/hide datetime selector based on radio selection
        document.querySelectorAll('input[name="schedule"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const dateTimeSelector = document.getElementById('dateTimeSelector');
                dateTimeSelector.classList.toggle('hidden', e.target.value === 'now');
            });
        });

        function showScheduleView() {
            navigateTo('schedule');
        }

        function showDatePicker() {
            document.getElementById('datePickerSheet').classList.remove('hidden');
        }

        function showTimePicker() {
            document.getElementById('timePickerSheet').classList.remove('hidden');
        }

        function closeDatePicker() {
            document.getElementById('datePickerSheet').classList.add('hidden');
        }

        function closeTimePicker() {
            document.getElementById('timePickerSheet').classList.add('hidden');
        }

        function updateSelectedDate(value) {
            const date = new Date(value);
            const formatted = date.toLocaleDateString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                year: 'numeric' 
            });
            document.getElementById('dateButton').textContent = formatted;
        }

        function updateSelectedTime(value) {
            const [hours, minutes] = value.split(':');
            const date = new Date();
            date.setHours(hours);
            date.setMinutes(minutes);
            const formatted = date.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit',
                hour12: true 
            });
            document.getElementById('timeButton').textContent = formatted;
        }

        function saveScheduleAndReturn() {
            const date = document.getElementById('dateButton').textContent;
            const time = document.getElementById('timeButton').textContent;
            document.getElementById('schedulePreview').textContent = `${date} at ${time}`;
            navigateTo('compose');
        }

        function handleAddSubscriber(event) {
            event.preventDefault();
            const form = event.target;
            const emailInput = form.querySelector('input[type="email"]');
            
            if (!emailInput || !emailInput.value) {
                return;
            }
            
            // Create new subscriber element
            const newSubscriber = document.createElement('div');
            newSubscriber.className = 'subscriber-item';
            newSubscriber.innerHTML = `
                <div class="flex items-center justify-between">
                    <div>
                        <h3 class="text-xl mb-1">${emailInput.value}</h3>
                        <p class="text-gray-500">Subscribed just now</p>
                    </div>
                    <button class="text-red-500 text-lg font-medium remove-btn">
                        Remove
                    </button>
                </div>
            `;
            
            // Add remove functionality
            const removeBtn = newSubscriber.querySelector('.remove-btn');
            removeBtn.addEventListener('click', () => {
                newSubscriber.style.transition = 'all 0.3s ease';
                newSubscriber.style.opacity = '0';
                newSubscriber.style.transform = 'translateX(-100%)';
                
                setTimeout(() => {
                    newSubscriber.remove();
                    updateSubscriberCount();
                }, 300);
            });
            
            // Get the subscribers list
            const subscribersList = document.getElementById('subscribersList');
            if (subscribersList) {
                // Add to list
                subscribersList.insertBefore(newSubscriber, subscribersList.firstChild);
                // Update count
                updateSubscriberCount();
                // Reset form
                form.reset();
                // Navigate back to subscribers view
                navigateTo('subscribers');
            }
        }

        // Add remove functionality to existing items
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize subscriber count
            updateSubscriberCount();
            
            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const item = btn.closest('.subscriber-item');
                    item.style.transition = 'all 0.3s ease';
                    item.style.opacity = '0';
                    item.style.transform = 'translateX(-100%)';
                    
                    setTimeout(() => {
                        item.remove();
                        updateSubscriberCount();
                    }, 300);
                });
            });
        });

        function updateSubscriberCount() {
            const count = document.querySelectorAll('.subscriber-item').length;
            const formattedCount = new Intl.NumberFormat('en-US').format(count);
            const subscribersTitle = document.querySelector('#subscribers-view h2');
            if (subscribersTitle) {
                subscribersTitle.textContent = `Your Subscribers (${formattedCount})`;
            }
        }
    </script>
</body>
</html> 